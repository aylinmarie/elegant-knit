{"ast":null,"code":"import _toConsumableArray from\"/Users/aylinmcginnis/Sites/chic-knits/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/aylinmcginnis/Sites/chic-knits/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from'react';import axios from\"axios\";import stylesheet from'./Gallery.module.css';import Checkbox from'./components/Checkbox';import Masonry,{ResponsiveMasonry}from'react-responsive-masonry';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Gallery=function Gallery(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),items=_useState2[0],setItems=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),filterBy=_useState4[0],setFilterBy=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var DESIGNERS=[];// Set filter for creators\nitems?DESIGNERS.push(items.map(function(item){return item.favorited.designer.name;})):DESIGNERS=[];var CREATORS=_toConsumableArray(new Set(DESIGNERS[0]));var updateFilter=function updateFilter(item){if(filterBy.includes(item)){setFilterBy(function(prevValues){return prevValues.filter(function(v){return v!==item;});});}else{setFilterBy(function(prevValues){return[].concat(_toConsumableArray(prevValues),[item]);});}};var FILTERED_ITEMS=filterBy.length===0?items:items.filter(function(item){return filterBy.includes(item.favorited.designer.name);});// Fetch data\nuseEffect(function(){axios.get(\"/data\").then(function(response,error){setItems(response.data.favorites);}).catch(function(error){setError(error);});},[]);// If data cannot be retrieved, return error message\nif(error){return error;}// Return patterns\nreturn items&&/*#__PURE__*/_jsxs(\"div\",{className:stylesheet.wrapper,children:[/*#__PURE__*/_jsxs(\"fieldset\",{className:stylesheet.filter,children:[/*#__PURE__*/_jsx(\"legend\",{children:\"Creators\"}),CREATORS.map(function(creator){return/*#__PURE__*/_jsx(Checkbox,{label:creator,value:filterBy.includes(creator),onChange:function onChange(){return updateFilter(creator);}},creator);})]}),/*#__PURE__*/_jsx(\"h2\",{className:\"visuallyHidden\",children:\"Gallery of Knit Patterns\"}),/*#__PURE__*/_jsx(ResponsiveMasonry,{columnsCountBreakPoints:{350:1,750:2,900:3},children:/*#__PURE__*/_jsx(Masonry,{gutter:\"24px\",children:FILTERED_ITEMS.map(function(item){return item.type==='pattern'&&/*#__PURE__*/_jsx(\"a\",{href:\"https://www.ravelry.com/patterns/library/\".concat(item.favorited.permalink),target:\"_blank\",rel:\"noreferrer\",className:stylesheet.link,children:/*#__PURE__*/_jsxs(\"div\",{className:stylesheet.card,children:[/*#__PURE__*/_jsx(\"img\",{src:item.favorited.first_photo.medium2_url,alt:\"\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{children:item.favorited.name}),/*#__PURE__*/_jsxs(\"p\",{className:stylesheet.designer,children:[/*#__PURE__*/_jsx(\"span\",{className:\"visuallyHidden\",children:\"Designer: \"}),item.favorited.designer.name]})]})]})},item.favorited.name);})})})]});};export default Gallery;","map":{"version":3,"sources":["/Users/aylinmcginnis/Sites/chic-knits/src/Gallery.js"],"names":["useEffect","useState","axios","stylesheet","Checkbox","Masonry","ResponsiveMasonry","Gallery","items","setItems","filterBy","setFilterBy","error","setError","DESIGNERS","push","map","item","favorited","designer","name","CREATORS","Set","updateFilter","includes","prevValues","filter","v","FILTERED_ITEMS","length","get","then","response","data","favorites","catch","wrapper","creator","type","permalink","link","card","first_photo","medium2_url"],"mappings":"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","sourcesContent":["import { useEffect, useState } from 'react';\nimport axios from \"axios\";\n\nimport stylesheet from './Gallery.module.css';\nimport Checkbox from './components/Checkbox';\n\nimport Masonry, { ResponsiveMasonry } from 'react-responsive-masonry';\n\nconst Gallery = () => {\n  const [ items, setItems ] = useState([]); \n  const [ filterBy, setFilterBy ] = useState([]);\n  const [ error, setError ] = useState(null);\n  let DESIGNERS = []\n  \n  // Set filter for creators\n  items ? DESIGNERS.push(items.map(item => item.favorited.designer.name)) : DESIGNERS = []\n\n  const CREATORS = [...new Set(DESIGNERS[0])];\n\n  const updateFilter = (item) => {\n    if(filterBy.includes(item)) {\n      setFilterBy((prevValues) => prevValues.filter((v) => v !== item));\n    } else {\n      setFilterBy((prevValues) => [...prevValues, item]);\n    }\n  }\n  const FILTERED_ITEMS = filterBy.length === 0 ? items : items.filter(item => filterBy.includes(item.favorited.designer.name));\n\n  // Fetch data\n  useEffect(() => {\n    axios.get(\"/data\").then((response, error) => {\n      setItems(response.data.favorites)\n    }).catch(error => {\n      setError(error);\n    });\n  }, []);\n\n  // If data cannot be retrieved, return error message\n  if (error) { return error } \n\n  // Return patterns\n  return items && (\n    <div className={stylesheet.wrapper}>\n      <fieldset className={stylesheet.filter}>\n        <legend>Creators</legend>\n          {CREATORS.map(creator => {\n            return <Checkbox key={creator} label={creator} value={filterBy.includes(creator)} onChange={() => updateFilter(creator)}/>\n            })}\n      </fieldset>\n      <h2 className=\"visuallyHidden\">Gallery of Knit Patterns</h2>\n      <ResponsiveMasonry\n        columnsCountBreakPoints={{ 350: 1, 750: 2, 900: 3 }}\n      >\n        <Masonry gutter=\"24px\">\n          {FILTERED_ITEMS.map(item => {\n            return item.type === 'pattern' && (\n              <a key={item.favorited.name} \n                href={`https://www.ravelry.com/patterns/library/${item.favorited.permalink}`}\n                target=\"_blank\" \n                rel=\"noreferrer\"\n                className={stylesheet.link}>\n                <div className={stylesheet.card}>\n                  <img src={item.favorited.first_photo.medium2_url} alt=\"\"/>\n                  <div>\n                    <p>{item.favorited.name}</p>\n                    <p className={stylesheet.designer}>\n                      <span className=\"visuallyHidden\">Designer: </span>\n                      {item.favorited.designer.name}\n                    </p>\n                  </div>\n                </div>\n              </a>\n            )\n          })}\n        </Masonry>\n      </ResponsiveMasonry>\n    </div>\n  )\n}\n\nexport default Gallery;\n"]},"metadata":{},"sourceType":"module"}